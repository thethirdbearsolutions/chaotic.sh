<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chaotic - Issue Tracking</title>
    <link rel="icon" href="/favicon.ico" sizes="48x48">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="/css/style.css">
    <!-- Fallback for when JS is disabled: show auth screen -->
    <noscript>
        <style>#auth-screen { display: block !important; }</style>
    </noscript>
</head>
<body>
    <div id="app">
        <!-- Auth screens (hidden by default to prevent FOUC on load; noscript unhides) -->
        <div id="auth-screen" class="screen hidden">
            <div class="auth-container">
                <div class="logo">
                    <h1>Chaotic</h1>
                    <p>Issue tracking for modern teams</p>
                </div>
                <div id="login-form" class="auth-form">
                    <h2>Sign In</h2>
                    <form>
                        <div class="form-group">
                            <label for="login-email">Email</label>
                            <input type="email" id="login-email" required>
                        </div>
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Sign In</button>
                    </form>
                    <p class="auth-switch">Don't have an account? <a href="#">Sign up</a></p>
                </div>
                <div id="signup-form" class="auth-form hidden">
                    <h2>Create Account</h2>
                    <form>
                        <div class="form-group">
                            <label for="signup-name">Name</label>
                            <input type="text" id="signup-name" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-email">Email</label>
                            <input type="email" id="signup-email" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-password">Password</label>
                            <input type="password" id="signup-password" minlength="8" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Create Account</button>
                    </form>
                    <p class="auth-switch">Already have an account? <a href="#">Sign in</a></p>
                </div>
            </div>
        </div>

        <!-- Main app -->
        <div id="main-screen" class="screen hidden">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="team-selector">
                        <span id="current-team-name">Select Team</span>
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div id="team-dropdown" class="dropdown hidden">
                        <div id="team-list"></div>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" data-action="showCreateTeamModal">+ Create Team</button>
                    </div>
                </div>
                <button class="sidebar-create-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    New Issue
                </button>
                <nav class="sidebar-nav">
                    <a href="#" class="nav-item active" data-view="my-issues">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                        </svg>
                        Dashboard
                    </a>
                    <a href="#" class="nav-item" data-view="issues">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                        </svg>
                        Issues
                    </a>
                    <a href="#" class="nav-item" data-view="gate-approvals">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                        </svg>
                        Approvals
                    </a>
                    <a href="#" class="nav-item" data-view="documents">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                        </svg>
                        Documents
                    </a>
                    <a href="#" class="nav-item" data-view="sprints">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                        </svg>
                        Sprints
                    </a>
                    <a href="#" class="nav-item" data-view="board">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/>
                        </svg>
                        Board
                    </a>
                    <a href="#" class="nav-item" data-view="projects">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/>
                        </svg>
                        Projects
                    </a>
                    <a href="#" class="nav-item" data-view="settings">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                        </svg>
                        Settings
                    </a>
                    <a href="#" class="nav-item" data-view="team">
                        <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/>
                        </svg>
                        Team
                    </a>
                </nav>
                <div class="sidebar-footer">
                    <div class="user-menu">
                        <div class="avatar" id="user-avatar">U</div>
                        <span id="user-name">User</span>
                    </div>
                    <div id="user-dropdown" class="dropdown hidden">
                        <button class="dropdown-item" data-action="logout">Sign Out</button>
                    </div>
                </div>
            </aside>

            <!-- Main content -->
            <main class="main-content">
                <!-- Dashboard view (My Issues) -->
                <div id="my-issues-view" class="view">
                    <div class="view-header">
                        <h2>Dashboard</h2>
                        <div class="view-actions">
                            <select id="my-issues-status-filter">
                                <option value="">All Statuses</option>
                                <option value="backlog">Backlog</option>
                                <option value="todo">Todo</option>
                                <option value="in_progress">In Progress</option>
                                <option value="in_review">In Review</option>
                                <option value="done">Done</option>
                            </select>
                        </div>
                    </div>
                    <div class="dashboard-activity">
                        <div class="section-header">
                            <h3>Recent Activity</h3>
                        </div>
                        <div id="dashboard-activity-list" class="activity-list"></div>
                    </div>
                    <div id="my-issues-list" class="list"></div>
                </div>

                <!-- All Issues view with search -->
                <div id="issues-view" class="view hidden">
                    <div class="view-header">
                        <h2>All Issues</h2>
                        <!-- New Linear-style Filter Bar -->
                        <div class="filter-bar-primary">
                            <div class="search-box">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                                <input type="text" id="issue-search" placeholder="Search issues...">
                                <kbd class="search-hint">/</kbd>
                            </div>
                            <div class="filter-menu-container">
                                <button type="button" class="filter-menu-btn" id="filter-menu-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                                    </svg>
                                    <span>Filter</span>
                                    <span class="filter-count-badge hidden" id="filter-count-badge">0</span>
                                </button>
                                <div class="filter-menu-dropdown hidden" id="filter-menu-dropdown">
                                    <div class="filter-menu-categories" id="filter-menu-categories">
                                        <!-- Categories rendered by JS -->
                                    </div>
                                    <div class="filter-menu-options" id="filter-menu-options">
                                        <!-- Options rendered by JS based on selected category -->
                                    </div>
                                </div>
                            </div>
                            <div class="display-menu-container">
                                <button type="button" class="filter-menu-btn" id="display-menu-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="3" width="7" height="7"></rect>
                                        <rect x="14" y="3" width="7" height="7"></rect>
                                        <rect x="14" y="14" width="7" height="7"></rect>
                                        <rect x="3" y="14" width="7" height="7"></rect>
                                    </svg>
                                    <span>Display</span>
                                </button>
                                <div class="display-menu-dropdown hidden" id="display-menu-dropdown">
                                    <!-- Display options rendered by JS -->
                                </div>
                            </div>
                            <button class="btn btn-primary" data-action="showCreateIssueModal">+ New Issue</button>
                        </div>
                    </div>
                    <!-- Filter Chips Row -->
                    <div class="filter-chips-row hidden" id="filter-chips-row">
                        <!-- Chips rendered by JS -->
                    </div>
                    <!-- Hidden original controls (preserve IDs for existing JS) -->
                    <div class="hidden-filter-controls">
                        <select id="project-filter">
                            <option value="">All Projects</option>
                        </select>
                        <div class="multi-select-dropdown" id="status-filter-dropdown">
                            <button type="button" class="multi-select-btn">
                                <span class="multi-select-label">All Statuses</span>
                                <svg class="icon" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <div class="multi-select-options hidden">
                                <label class="multi-select-option">
                                    <input type="checkbox" value="backlog">
                                    <span class="status-icon"><svg width="14" height="14" viewBox="0 0 16 16" class="status-backlog"><circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-dasharray="2 2"/></svg></span>
                                    Backlog
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="todo">
                                    <span class="status-icon"><svg width="14" height="14" viewBox="0 0 16 16" class="status-todo"><circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/></svg></span>
                                    Todo
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="in_progress">
                                    <span class="status-icon"><svg width="14" height="14" viewBox="0 0 16 16" class="status-in-progress"><circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M8 2a6 6 0 0 1 0 12" fill="currentColor"/></svg></span>
                                    In Progress
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="in_review">
                                    <span class="status-icon"><svg width="14" height="14" viewBox="0 0 16 16" class="status-in-review"><circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M8 2a6 6 0 0 1 6 6 6 6 0 0 1-6 6" fill="currentColor"/></svg></span>
                                    In Review
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="done">
                                    <span class="status-icon"><svg width="14" height="14" viewBox="0 0 16 16" class="status-done"><circle cx="8" cy="8" r="6" fill="currentColor"/><path d="M5 8l2 2 4-4" stroke="var(--bg-primary)" stroke-width="1.5" fill="none"/></svg></span>
                                    Done
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="canceled">
                                    <span class="status-icon"><svg width="14" height="14" viewBox="0 0 16 16" class="status-canceled"><circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M5 5l6 6M11 5l-6 6" stroke="currentColor" stroke-width="1.5"/></svg></span>
                                    Canceled
                                </label>
                                <div class="multi-select-actions">
                                    <button type="button" class="btn btn-small">Clear</button>
                                </div>
                            </div>
                        </div>
                        <div class="multi-select-dropdown" id="priority-filter-dropdown">
                            <button type="button" class="multi-select-btn">
                                <span class="multi-select-label">All Priorities</span>
                                <svg class="icon" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <div class="multi-select-options hidden">
                                <label class="multi-select-option">
                                    <input type="checkbox" value="urgent">
                                    <span class="priority-icon"><svg width="14" height="14" viewBox="0 0 16 16" class="priority-urgent"><rect x="2" y="2" width="12" height="12" rx="2" fill="currentColor"/><text x="8" y="11.5" text-anchor="middle" fill="var(--bg-primary)" font-size="10" font-weight="bold">!</text></svg></span>
                                    Urgent
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="high">
                                    <span class="priority-icon"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor" class="priority-high"><rect x="1" y="3" width="3" height="12" rx="1"/><rect x="6" y="6" width="3" height="9" rx="1"/><rect x="11" y="9" width="3" height="6" rx="1"/></svg></span>
                                    High
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="medium">
                                    <span class="priority-icon"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor" class="priority-medium"><rect x="1" y="6" width="3" height="9" rx="1" opacity="0.3"/><rect x="6" y="6" width="3" height="9" rx="1"/><rect x="11" y="9" width="3" height="6" rx="1"/></svg></span>
                                    Medium
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="low">
                                    <span class="priority-icon"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor" class="priority-low"><rect x="1" y="9" width="3" height="6" rx="1" opacity="0.3"/><rect x="6" y="9" width="3" height="6" rx="1" opacity="0.3"/><rect x="11" y="9" width="3" height="6" rx="1"/></svg></span>
                                    Low
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="no_priority">
                                    <span class="priority-icon"><svg width="14" height="14" viewBox="0 0 16 16" class="priority-none"><line x1="3" y1="8" x2="13" y2="8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity="0.4"/><line x1="3" y1="11" x2="13" y2="11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity="0.4"/></svg></span>
                                    No Priority
                                </label>
                                <div class="multi-select-actions">
                                    <button type="button" class="btn btn-small">Clear</button>
                                </div>
                            </div>
                        </div>
                        <select id="issue-type-filter">
                            <option value="">All Types</option>
                            <option value="task">Task</option>
                            <option value="bug">Bug</option>
                            <option value="feature">Feature</option>
                            <option value="chore">Chore</option>
                            <option value="docs">Docs</option>
                        </select>
                        <select id="assignee-filter">
                            <option value="">All Assignees</option>
                            <option value="me">Assigned to me</option>
                            <option value="unassigned">Unassigned</option>
                            <!-- Team members populated by JS -->
                        </select>
                        <select id="sprint-filter">
                            <option value="">All Sprints</option>
                            <option value="no_sprint">No Sprint</option>
                            <option value="current">Current Sprint</option>
                            <!-- Sprints populated by JS -->
                        </select>
                        <div class="multi-select-dropdown" id="label-filter-dropdown">
                            <button type="button" class="multi-select-btn">
                                <span class="multi-select-label">All Labels</span>
                                <svg class="icon" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <div class="multi-select-options hidden">
                                <!-- Labels populated by JS -->
                                <div class="multi-select-actions">
                                    <button type="button" class="btn btn-small">Clear</button>
                                </div>
                            </div>
                        </div>
                        <select id="sort-by-select">
                            <option value="created-desc">Sort: Newest</option>
                            <option value="created-asc">Sort: Oldest</option>
                            <option value="updated-desc">Sort: Recently Updated</option>
                            <option value="updated-asc">Sort: Least Recently Updated</option>
                            <option value="priority-asc">Sort: Priority ↑</option>
                            <option value="priority-desc">Sort: Priority ↓</option>
                            <option value="title-asc">Sort: Title A-Z</option>
                            <option value="title-desc">Sort: Title Z-A</option>
                            <option value="random">Sort: Random</option>
                        </select>
                        <select id="group-by-select">
                            <option value="">No grouping</option>
                            <option value="status">Group by Status</option>
                            <option value="priority">Group by Priority</option>
                            <option value="type">Group by Type</option>
                            <option value="assignee">Group by Assignee</option>
                            <option value="sprint">Group by Sprint</option>
                        </select>
                    </div>
                    <div id="sprint-budget-bar" class="sprint-budget-bar hidden"></div>
                    <div class="quick-create">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--text-muted)">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        <input type="text" class="quick-create-input" placeholder="Quick create issue... (press Enter)">
                        <span class="quick-create-hint">⌘K for commands</span>
                    </div>
                    <div id="issues-list" class="list"></div>
                </div>

                <!-- Kanban Board view -->
                <div id="board-view" class="view hidden">
                    <div class="view-header">
                        <h2>Board</h2>
                        <div class="view-actions">
                            <select id="board-project-filter">
                                <option value="">Select Project</option>
                            </select>
                        </div>
                    </div>
                    <div id="kanban-board" class="kanban-board"></div>
                </div>

                <div id="projects-view" class="view hidden">
                    <div class="view-header">
                        <h2>Projects</h2>
                        <button class="btn btn-primary" data-action="showCreateProjectModal">+ New Project</button>
                    </div>
                    <div id="projects-list" class="grid"></div>
                </div>

                <div id="sprints-view" class="view hidden">
                    <div class="view-header">
                        <h2>Sprints</h2>
                        <div class="view-actions">
                            <select id="sprint-project-filter">
                                <option value="">Select Project</option>
                            </select>
                        </div>
                    </div>
                    <div id="sprints-list" class="list"></div>
                </div>

                <div id="documents-view" class="view hidden">
                    <div class="view-header">
                        <h2>Documents</h2>
                        <div class="view-header-controls">
                            <select id="doc-project-filter" class="filter-select" aria-label="Filter by project">
                                <option value="">All Projects</option>
                            </select>
                            <button class="btn btn-primary" data-action="showCreateDocumentModal">+ New Document</button>
                        </div>
                    </div>
                    <div id="doc-bulk-actions" class="bulk-actions-bar hidden"></div>
                    <div id="documents-list" class="grid"></div>
                </div>

                <div id="team-view" class="view hidden">
                    <div class="view-header">
                        <h2>Team Members</h2>
                        <div class="view-actions">
                            <button class="btn btn-secondary" data-action="showEditTeamModal">Edit Team</button>
                            <button class="btn btn-primary" data-action="showInviteModal">+ Invite Member</button>
                        </div>
                    </div>
                    <p id="team-description-text" class="team-description"></p>
                    <h3 class="section-title">Members</h3>
                    <div id="team-members-list" class="list"></div>
                    <h3 class="section-title">Agents</h3>
                    <div id="team-agents-list" class="list"></div>
                    <h3 class="section-title">Pending Invitations</h3>
                    <div id="team-invitations-list" class="list"></div>
                </div>

                <div id="settings-view" class="view hidden">
                    <div class="view-header">
                        <h2>Settings</h2>
                    </div>
                    <div class="settings-content">
                        <section class="settings-section">
                            <h3>Appearance</h3>
                            <p class="settings-description">Toggle between dark and light themes.</p>
                            <div class="settings-toggle">
                                <label class="toggle-row" for="theme-toggle">
                                    <span>Light mode</span>
                                    <input type="checkbox" id="theme-toggle">
                                </label>
                            </div>
                        </section>
                        <section class="settings-section">
                            <h3>API Keys</h3>
                            <p class="settings-description">Create API keys to access Chaotic from the CLI or other applications.</p>
                            <button class="btn btn-primary" data-action="showCreateApiKeyModal">+ Create API Key</button>
                            <div id="api-keys-list" class="api-keys-list"></div>
                        </section>
                        <section class="settings-section">
                            <h3>Agents</h3>
                            <p class="settings-description">Create agents to give CLI automation its own identity. Agent actions are attributed separately from your human account.</p>
                            <button class="btn btn-primary" data-action="showCreateAgentModal">+ Create Agent</button>
                            <div id="agents-list" class="agents-list"></div>
                        </section>
                    </div>
                </div>

                <div id="issue-detail-view" class="view hidden">
                    <div id="issue-detail-content"></div>
                </div>

                <div id="document-detail-view" class="view hidden">
                    <div id="document-detail-content"></div>
                </div>

                <div id="project-settings-view" class="view hidden">
                    <div class="view-header">
                        <div class="view-header-left">
                            <button class="btn btn-secondary btn-small" data-action="navigateToProjects">← Back to Projects</button>
                            <h2 id="project-settings-title">Project Settings</h2>
                        </div>
                    </div>
                    <div class="settings-tabs">
                        <button class="settings-tab active" data-tab="general">General</button>
                        <button class="settings-tab" data-tab="rules">Estimates & Rules</button>
                        <button class="settings-tab" data-tab="sprint-rituals">Sprint Rituals</button>
                        <button class="settings-tab" data-tab="close-rituals">Close Rituals</button>
                        <button class="settings-tab" data-tab="claim-rituals">Claim Rituals</button>
                    </div>
                    <div class="settings-content">
                        <div id="project-settings-tab-general" class="settings-tab-content">
                            <section class="settings-section">
                                <h3>General Settings</h3>
                                <div class="settings-form">
                                    <div class="form-group">
                                        <label for="ps-name">Name</label>
                                        <input type="text" id="ps-name">
                                    </div>
                                    <div class="form-group">
                                        <label for="ps-key">Key</label>
                                        <input type="text" id="ps-key" disabled class="input-disabled">
                                        <small class="form-hint">Project key cannot be changed after creation</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="ps-description">Description</label>
                                        <textarea id="ps-description"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="ps-color">Color</label>
                                        <input type="color" id="ps-color">
                                    </div>
                                    <button class="btn btn-primary">Save Changes</button>
                                </div>
                            </section>
                        </div>
                        <div id="project-settings-tab-rules" class="settings-tab-content hidden">
                            <section class="settings-section">
                                <h3>Estimates & Rules</h3>
                                <div class="settings-form">
                                    <div class="form-group">
                                        <label for="ps-estimate-scale">Estimate Scale</label>
                                        <select id="ps-estimate-scale">
                                            <option value="fibonacci">Fibonacci (1, 2, 3, 5, 8, 13, 21)</option>
                                            <option value="linear">Linear (1-10)</option>
                                            <option value="powers_of_2">Powers of 2 (1, 2, 4, 8, 16, 32, 64)</option>
                                            <option value="tshirt">T-Shirt (XS, S, M, L, XL)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="ps-human-rituals-required">
                                            Require humans to complete rituals
                                        </label>
                                        <small class="form-hint">When unchecked, humans can close tickets without completing rituals</small>
                                    </div>
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="ps-require-estimate-on-claim">
                                            Require estimate on create/claim
                                        </label>
                                        <small class="form-hint">Blocks issue creation or claiming without an estimate</small>
                                    </div>
                                    <button class="btn btn-primary">Save Changes</button>
                                </div>
                            </section>
                        </div>
                        <div id="project-settings-tab-sprint-rituals" class="settings-tab-content hidden">
                            <section class="settings-section">
                                <div class="settings-section-header">
                                    <div>
                                        <h3>Sprint Rituals</h3>
                                        <p class="settings-description">Required when closing a sprint</p>
                                    </div>
                                    <button class="btn btn-primary">+ Create Ritual</button>
                                </div>
                                <div id="ps-sprint-rituals-list" class="rituals-list"></div>
                            </section>
                        </div>
                        <div id="project-settings-tab-close-rituals" class="settings-tab-content hidden">
                            <section class="settings-section">
                                <div class="settings-section-header">
                                    <div>
                                        <h3>Ticket Close Rituals</h3>
                                        <p class="settings-description">Required when closing a ticket</p>
                                    </div>
                                    <button class="btn btn-primary">+ Create Ritual</button>
                                </div>
                                <div id="ps-close-rituals-list" class="rituals-list"></div>
                            </section>
                        </div>
                        <div id="project-settings-tab-claim-rituals" class="settings-tab-content hidden">
                            <section class="settings-section">
                                <div class="settings-section-header">
                                    <div>
                                        <h3>Ticket Claim Rituals</h3>
                                        <p class="settings-description">Required when claiming a ticket (moving to in_progress)</p>
                                    </div>
                                    <button class="btn btn-primary">+ Create Ritual</button>
                                </div>
                                <div id="ps-claim-rituals-list" class="rituals-list"></div>
                            </section>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Modals -->
        <div id="modal-overlay" class="modal-overlay hidden">
            <div class="modal">
                <div class="modal-header">
                    <h3 id="modal-title">Modal</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div id="modal-content" class="modal-body"></div>
            </div>
        </div>

        <!-- Toast notifications -->
        <div id="toast-container"></div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>
